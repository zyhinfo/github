<%@ page language="java" contentType="text/html; charset=UTF-8"%><%@ include file="/jsp/base/core/taglibs.jsp"%><!DOCTYPE html><html>	<head>		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">		<script type="text/javascript">			var grid,query;	        //表格	        $(function (){	        	init_page();	        	var pageSize = '${pageSize}';	            grid = $("#maingrid").ligerGrid({	                height:'99%',enabledSort:false,	                columns: [	                	{ display: '数据编号', name: 'INST_ID', align: 'left', width: 150  },	                	{ display: '数据名称', name: 'INST_NAME', align: 'left', width: 250 },	                	{ display: '数据量', name: 'ROW_NUM', align: 'left', width: 100 },	                	{ display: '创建人', name: 'USER_NAME', width: 150 },	                	{ display: '上传日期', name: 'CREATE_DATE', width: 150 },	                	{ display: '状态', name: 'STATUS', align: 'center', width: 150,	                		render: function (rowdata, rowindex, value){			                    if (value == '0'){			                    	return "正在上传";			                    }else if(value == '1'){			                    	return "上传成功";			                    }else if(value == '-1'){			                    	return "上传失败";			                    }			                }	                	}	                ],	                url:"${ctx}/DataSetAction.action?method=getDataSetJSON",	                pageSize:pageSize ,rownumbers:true,	                toolbar: { items: [	                	{ id:'1', text: '查询', click: itemclick, icon: 'search2' },	                	{ line: true },	                	{ id:'2', text: '修改', click: itemclick, icon: 'modify' },	                	{ line: true },	                	{ id:'3', text: '删除', click: itemclick, icon: 'delete' },	                	{ line: true },	                	{ id:'4', text: '上传', click: itemclick, icon: '' },	                	{ line: true },	                	{ id:'5', text: '功能说明', click: itemclick, icon: '' }	                ]}	            });	            	            $("#pageloading").hide();	        });	        			function itemclick(item){				var id = item.id;	            var text = item.text;	            if(id == '1'){		        	query=ligerDialog_open(text,$("#targetQuery"),"queryOK","","");	            }else if(id == '2'){	            	var row = grid.getSelectedRow();            		if (!row) { warn_alert('请选择行'); return; }            		$("#instId").val(row.INST_ID);            		liger.get("instName").setValue(row.INST_NAME);            		ligerDialog_open(text,$("#target"),"editOK","","");	            }else if(id == '3'){	            	var row = grid.getSelectedRow();            		if (!row) { warn_alert('请选择行'); return; }            		$.ligerDialog.confirm('是否删除数据？', function (isOk) {            			if(isOk){            				$.post("${ctx}/DataSetAction.action?method=deleteDataSet&anticache="									+ Math.floor(Math.random() * 10000), {								id : row.INST_ID,								tableName : row.INST_TABLE							}, function(info) {								if (info.info == undefined) {									info = eval("(" + info + ")");								}								if (info.info == 'ok') {									grid.reload();								} else {									error_alert("${ctx}","删除数据失败","编号："+row.INST_ID);								}							});            			}            			            		});	            }else if(id == '4'){	            	window.location.href="${ctx}/UploadAction.action?method=gotoUpload";	            }else if(id == '5'){	            	showMenuDesc(text);	            }	        }	       //查询点击确定按钮			function queryOK(item, dialog){				var gridManager = $("#maingrid").ligerGetGridManager();        		if (!gridManager) return;   				gridManager.setOptions({parms:[   					{name : "instName",value:liger.get("queryInstName").getValue()}   					]});   				gridManager.loadData(true);   				dialog.hidden();			}						//编辑点击确定按钮			function editOK(item, dialog){				var param ={					instId : $("#instId").val(),					instName : liger.get("instName").getValue()				};				$.post("${ctx }/DataSetAction.action?method=saveDataSetEdit&anticache="						+ Math.floor(Math.random() * 10000), param, function(info){					if (info.info == undefined) {						info = eval("(" + info + ")");					}					if (info.info == 'ok') {	            		grid.reload();	            		dialog.hidden();					} else {						error_alert("${ctx}","修改数据失败",mapToString(param));					}				});			}	         		</script>	</head>	<body style="overflow-x:hidden; padding:2px;">		<div class="l-loading" style="display:block" id="pageloading"></div>    	<div id="maingrid"></div>    	<div id="targetQuery" class="self-form" style="display:none;">    		<table class="self_table" >    			<tr>    				<td width="90px">数据名称:</td>    				<td><input type="text" id="queryInstName"  value=""></td>    			</tr>    		</table>    	</div>    	<div id="target" class="self-form" style="display:none;">    		<table class="self_table">    			<tr>    				<td width="90px">数据名称:</td>    				<td><input type="text" id="instName" value=""></td>    			</tr>    		</table>    	</div>    	<input type="hidden" id="instId" value="">	</body></html>