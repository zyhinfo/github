<%@ page language="java" contentType="text/html; charset=UTF-8"%><%@ include file="/jsp/base/core/taglibs.jsp"%><html>	<head>		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">		<script type="text/javascript">			var grid,query;				        //表格	        $(function (){	        	init_page();	        	var pageSize = '${pageSize}';	            grid = $("#maingrid").ligerGrid({	                height:'99%',enabledSort:false,	                columns: [	                	{ display: '菜单名称', name: 'MENU_NAME', align: 'left', width: 200 },	                	{ display: '用户名称', name: 'USER_NAME', align: 'left', width: 200 },	                	{ display: '错误概括', name: 'ERROR_SUMMARY', align: 'left', width: 350 },	                	{ display: '提交日期', name: 'CREATE_DATE', width: 150 },	                	{ display: '操作', isSort: false, width: 100, render: function (rowdata, rowindex, value){                    		return "<a href='#' onclick=\"queryDetail('"+rowdata.ERROR_DESCRIPTION+"')\">明细</a>";                			}                		}	                ], 	                url:"${ctx}/ErrorLogAction.action?method=getErrorLogJSON",  	                pageSize:pageSize ,rownumbers:true,	                toolbar: { items: [	                	{ id:'1', text: '查询', click: itemclick, icon: 'search2' },	                	{ line: true },	                	{ id:'2', text: '删除', click: itemclick, icon: 'delete' },	                	{ line: true },	                	{ id:'3', text: '功能说明', click: itemclick, icon: '' }	                ]}	            });	            $("#pageloading").hide();	        });	        function queryDetail(detail){	        	if(detail == null || detail == "null") detail = "";	        	$("#target").html(detail);	        	ligerDialog_open("明细",$("#target"),"","600","400");	        }			function itemclick(item){				var id = item.id;				var text = item.text;				if(id == "1"){					query=ligerDialog_open(item.text,$("#targetQuery"),"queryOK","","");				}else if(id == "2"){					var row = grid.getSelectedRow();            		if (!row) { warn_alert('请选择行'); return; }            		$.ligerDialog.confirm('是否删除错误信息？', function (isOk) {            			if(isOk){            				$.post("${ctx}/ErrorLogAction.action?method=deleteErrorLog&anticache="									+ Math.floor(Math.random() * 10000), {								id : row.ERROR_ID							}, function(info) {								if (info.info == undefined) {									info = eval("(" + info + ")");								}								if (info.info == 'ok') {									grid.reload();								} else {									error_alert("${ctx}","删除错误信息失败","编号："+row.ERROR_ID);								}							});            			}            			            		});				}else if(id == "3"){					showMenuDesc(text);				}	            	        }	        	        	       	//查询点击确定按钮			function queryOK(item, dialog){				var gridManager = $("#maingrid").ligerGetGridManager();        		if (!gridManager) return;   				gridManager.setOptions({parms:[   					{name : "userName", value:liger.get("queryUserName").getValue()},   					{name : "menuName", value:liger.get("queryMenuName").getValue()}   				]});   				gridManager.loadData(true);   				dialog.hidden();			}					</script>	</head>	<body style="overflow-x:hidden; padding:2px;">		<div class="l-loading" style="display:block" id="pageloading"></div>    	<div id="maingrid"></div>    	<div id="targetQuery" class="self-form" style="display:none;">        	<table class="self-table">    			<tr>    				<td width="90px">用户名称</td>    				<td><input type="text" id="queryUserName" value=""></td>    			</tr>    			<tr>    				<td width="90px">菜单名称</td>    				<td><input type="text" id="queryMenuName" value=""></td>    			</tr>    		</table>    	</div>    	<div id="target" style="display:none;"></div>	</body></html>