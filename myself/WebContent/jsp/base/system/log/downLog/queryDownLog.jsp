<%@ page language="java" contentType="text/html; charset=UTF-8"%><%@ include file="/jsp/base/core/taglibs.jsp"%><html>	<head>		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">		<script type="text/javascript">			var grid,quer;			function downFile(downId,filePath,downAgain){				$("#downId").val(downId);				$("#filePath").val(filePath);				$("#downAgain").val(downAgain);				$("#downFileForm").submit();			}	        //表格	        $(function (){	        	init_page();	        	var pageSize = '${pageSize}';	            grid = $("#maingrid").ligerGrid({	                height:'99%',enabledSort:false,	                columns: [	                	{ display: '用户名', name: 'USER_NAME', align: 'left', width: 150 },	                	{ display: '下载描述', name: 'DOWN_DESC', align: 'left', width: 250 },	                	{ display: '文件大小', name: 'FILE_SIZE', align: 'right', width: 100},	                	{ display: '文件条数', name: 'FILE_ROWNUM', align: 'right', width: 100 },                		{ display: '文件路径', name: 'DOWN_FILE_PATH', align: 'left', width: 300, hide:true },	                	{ display: '下载时间', name: 'START_DATE', align: 'center', width: 150 },	                	{ display: '操作', isSort: false, width: 100, render: 	                		function (rowdata, rowindex, value){	                			var str = "";	                			var isDown = rowdata.IS_DOWN;	                			if(isDown=="1"){									str="<a href='#' onclick=\"downFile('"+rowdata.DOWN_ID+"','"+rowdata.DOWN_FILE_PATH+"','yes')\"><font color='red'>重复下载</font></a>";								}else if(isDown=="-1"){									str="下载失败";								}else{									if(rowdata.DOWN_PROGRESS=="100"){										str="<a href='#' onclick=\"downFile('"+rowdata.DOWN_ID+"','"+rowdata.DOWN_FILE_PATH+"','')\"><font color='red'>下载</font></a>";									}								}                    			return str;                			}                		}	                ], 	                url:"${ctx}/DownLogAction.action?method=getDownLogJSON",  	                pageSize:pageSize ,rownumbers:true,	                toolbar: { items: [	                	{ id:'1', text: '查询', click: itemclick, icon: 'search2' },	                	{ line: true },	                	{ id:'2', text: '功能说明', click: itemclick, icon: '' }	                ]}	            });	            $("#pageloading").hide();	        });	        			function itemclick(item){				var id = item.id;	            var text = item.text;				if(id == '1'){					query=ligerDialog_open(text,$("#targetQuery"),"queryOK","","");				}else if(id == '2'){					showMenuDesc(text);				}	            	        }	       //查询点击确定按钮			function queryOK(item, dialog){				var gridManager = $("#maingrid").ligerGetGridManager();        		if (!gridManager) return;   				gridManager.setOptions({parms:[   					{name : "downDesc", value:liger.get("queryDownDesc").getValue()}   				]});   				gridManager.loadData(true);   				dialog.hidden();			}					</script>	</head>	<body style="overflow-x:hidden; padding:2px;">		<div class="l-loading" style="display:block" id="pageloading"></div>    	<div id="maingrid"></div>    	<div id="targetQuery" class="self-form" style="display:none;">        	<table class="self-table">    			<tr>    				<td width="90px">下载描述</td>    				<td><input type="text" id="queryDownDesc" value=""></td>    			</tr>    		</table>    	</div>    	<form action="${ctx}/DownLogAction.action?method=getDownFile" method="post" id="downFileForm">    		<input type="hidden" value="" id="downId" name="downId">    		<input type="hidden" value="" id="filePath" name="filePath">    		<input type="hidden" value="" id="downAgain" name="downAgain">    	</form>	</body></html>