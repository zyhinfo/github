<%@ page language="java" contentType="text/html; charset=UTF-8"%><%@ include file="/jsp/base/core/taglibs.jsp"%><html>	<head>		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">		<script type="text/javascript">			var grid,quer;			//表格	        $(function (){	        	//init_page();	            grid = $("#maingrid").ligerGrid({	                height:'99%',enabledSort:false,usePager:false,rownumbers:true,	                columns: [	                	{ display: '编号', name: 'USER_USERGROUP_ID', align: 'left', width: 150 },	                	{ display: '机构', name: 'ORG_NAME', align: 'left', width: 250 },	                	{ display: '用户组', name: 'USERGROUP_NAME', align: 'left', width: 150 }	                ], 	                url:"${ctx}/UserDetailAction.action?method=getUserDetailJSON&userId=${userId}", 	                toolbar: { items: [	                	{ line: true },	                	{ text: '增加', click: itemclick, icon: 'add' },	                	{ line: true },	                	{ text: '删除', click: itemclick, icon: 'delete' },	                	{ line: true },	                	{ text: '返回', click: itemclick, icon: 'back' }	                ]}	            });	            $("#pageloading").hide();	            comboBox("orgId","${ctx}/OrgAction.action?method=queryComboBoxOrg","tree");	            comboBox("userGroupId","${ctx}/UserDetailAction.action?method=getUserGroupJSON","");	        });	        			function itemclick(item){	            var text = item.text;	            if(text == '增加'){	            	liger.get("orgId").setValue("");	            	liger.get("orgId").setText("");	            	liger.get("userGroupId").setValue("");	            	//liger.get("userGroupId").setText("");	            	ligerDialog_open(text,$("#target"),"addOK","","");	            }else if(text == '删除'){	            	var row = grid.getSelectedRow();            		if (!row) { warn_alert('请选择行'); return; }            		$.ligerDialog.confirm('是否删除用户、用户组和机构间关系？', function (isOk) {            			if(isOk){		            		$.post("${ctx}/UserDetailAction.action?method=deleteUserDetail&anticache="									+ Math.floor(Math.random() * 10000), {								id : row.USER_USERGROUP_ID							}, function(info) {								if (info.info == undefined) {									info = eval("(" + info + ")");								}								if (info.info == 'ok') {									grid.reload();								} else {									error_alert("${ctx}","删除用户、用户组和机构关系失败","编号："+row.USER_USERGROUP_ID);								}							});						}					});            			            }else if(text == '返回'){	            	window.location.href="${ctx}/UserAction.action?method=gotoUserList";	            }	        }			//新增点击确定按钮			function addOK(item, dialog){				var param = {					userId : $("#userId").val(),					userGroupId : liger.get("userGroupId").getValue(),					orgId : liger.get("orgId").getValue()				};				$.post("${ctx }/UserDetailAction.action?method=saveUserDetailAdd&anticache="						+ Math.floor(Math.random() * 10000), param, function(info) {					if (info.info == undefined) {						info = eval("(" + info + ")");					}					if (info.info == 'ok') {	            		grid.reload();	            		dialog.hidden();					} else {						error_alert("${ctx}","新增用户、用户组和机构关系失败",mapToString(param));					}				});			}					</script>	</head>	<body style="overflow-x:hidden; padding:2px;">		<div class="l-loading" style="display:block" id="pageloading"></div>    	<div id="maingrid"></div>    	<div id="target" style="display:none;">    		<table class="self-table">    			<tr>    				<td width="90px">机构</td>    				<td><input type="text" id="orgId" name="orgId"  value=""></td>    			</tr>    			<tr>    				<td width="90px">用户组</td>    				<td><input type="text" id="userGroupId" name="userGroupId" value=""></td>    			</tr>    		</table>    	</div>    	<input type="hidden" id="userId" value="${userId }">	</body></html>